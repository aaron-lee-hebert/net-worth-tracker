@model NetWorthTracker.Core.ViewModels.AccountViewModel
@using NetWorthTracker.Core.Enums
@using NetWorthTracker.Core.Extensions
@{
    ViewData["Title"] = "Delete Account";
}

<div class="row justify-content-center">
    <div class="col-md-6">
        <div class="card shadow border-danger">
            <div class="card-header bg-danger text-white">
                <h4 class="mb-0"><i class="bi bi-exclamation-triangle me-2"></i>Delete Account</h4>
            </div>
            <div class="card-body">
                <div class="alert alert-warning">
                    <i class="bi bi-exclamation-triangle me-2"></i>
                    <strong>Warning:</strong> This action cannot be undone. All balance history for this account will also be deleted.
                </div>

                <h5>Are you sure you want to delete this account?</h5>

                <dl class="row mt-4">
                    <dt class="col-sm-4">Name</dt>
                    <dd class="col-sm-8">@Model.Name</dd>

                    <dt class="col-sm-4">Type</dt>
                    <dd class="col-sm-8">
                        <span class="badge @GetAccountTypeBadgeClass(Model.AccountType)">
                            @Model.AccountType.GetDisplayName()
                        </span>
                    </dd>

                    <dt class="col-sm-4">Balance</dt>
                    <dd class="col-sm-8">@Model.CurrentBalance.ToString("C")</dd>

                    <dt class="col-sm-4">Institution</dt>
                    <dd class="col-sm-8">@(Model.Institution ?? "-")</dd>
                </dl>

                <form asp-action="Delete" method="post">
                    <input type="hidden" asp-for="Id" />
                    <div class="d-flex justify-content-between mt-4">
                        <a asp-action="Index" class="btn btn-outline-secondary">
                            <i class="bi bi-arrow-left me-1"></i>Cancel
                        </a>
                        <button type="submit" class="btn btn-danger">
                            <i class="bi bi-trash me-1"></i>Delete Account
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@functions {
    string GetAccountTypeBadgeClass(AccountType type)
    {
        var category = type.GetCategory();
        return category switch
        {
            AccountCategory.Banking => "bg-primary",
            AccountCategory.Investment => "bg-info",
            AccountCategory.RealEstate => "bg-warning text-dark",
            AccountCategory.VehiclesAndProperty => "bg-secondary",
            AccountCategory.Business => "bg-success",
            AccountCategory.SecuredDebt => "bg-danger",
            AccountCategory.UnsecuredDebt => "bg-danger",
            AccountCategory.OtherLiabilities => "bg-danger",
            _ => "bg-secondary"
        };
    }
}
